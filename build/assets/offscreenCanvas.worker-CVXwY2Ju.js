(function(){"use strict";onmessage=c=>{try{const{canvas:t,page:e,viewport:n}=c.data,p=t.getContext("2d");console.log(t,e,n);const{buffer:i,naturalWidth:s,naturalHeight:o}=e;let a=e.bitmap;const{width:f,height:l}=n;if(!a){const g=new Uint8ClampedArray(i.buffer),m=new ImageData(g,s,o),r=new OffscreenCanvas(s,o);r.getContext("2d").putImageData(m,0,0),a=r.transferToImageBitmap()}requestAnimationFrame(()=>{postMessage(e.bitmap?!0:a)})}catch(t){console.log("error",t,t.message),postMessage(null)}}})();
